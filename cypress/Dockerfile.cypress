FROM milmove/circleci-docker:milmove-cypress-fcd147c8b7ccddc93df93f4f5a2817686b4d9b5b

# use the WORKDIR from the CI image
# hadolint ignore=DL3045
COPY . ./cypress
# hadolint ignore=DL3045
COPY cypress.config.js ./cypress.config.js
# hadolint ignore=DL3045
COPY mocha-reporter-config.json ./mocha-reporter-config.json

USER root
RUN chown -R circleci:circleci ./cypress cypress.config.js mocha-reporter-config.json
USER circleci

ENTRYPOINT ["./node_modules/.bin/cypress"]
CMD ["run"]
