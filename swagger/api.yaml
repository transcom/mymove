swagger: '2.0'
info:
  description: The public API for my.move.mil. This is a work in-progress, and is not a final product. We will be continuously updating this site based on feedback.
  version: 0.0.1
  title: my.move.mil
  license:
    name: MIT
    url: https://github.com/transcom/mymove/blob/master/LICENSE.md
basePath: /api/v1
consumes:
  - application/json
produces:
  - application/json
definitions:
  Tariff400ngItemLocation:
    type: string
    title: Location
    enum:
      - ORIGIN
      - DESTINATION
      - NEITHER
      - EITHER
    x-display-value:
      ORIGIN: Origin
      DESTINATION: Destination
      NEITHER: Neither
      EITHER: Either
  DistanceCalculation:
    type: object
    properties:
      origin_address:
        $ref: '#/definitions/Address'
      destination_address:
        $ref: '#/definitions/Address'
      distance_miles:
        type: integer
        title: Distance
        description: unit is miles
  ShipmentLineItemLocation:
    type: string
    title: Location
    enum:
      - ORIGIN
      - DESTINATION
      - NEITHER
    x-display-value:
      ORIGIN: Origin
      DESTINATION: Destination
      NEITHER: Neither
  ShipmentLineItemStatus:
    type: string
    title: Status
    enum:
      - SUBMITTED
      - APPROVED
      - INVOICED
      - CONDITIONALLY_APPROVED
    x-display-value:
      SUBMITTED: Submitted
      APPROVED: Approved
      INVOICED: Invoiced
      CONDITIONALLY_APPROVED: Conditionally Approved
  Dimensions:
    type: object
    format: dimensions
    properties:
      length:
        type: integer
        format: dimension
        title: Length
        description: Length recorded as base quantity unit, eg. baseQuantityInch
        minimum: 0
        example: 167000
      width:
        type: integer
        format: dimension
        title: Width
        description: Width recorded as base quantity unit, eg. baseQuantityInch
        minimum: 0
        example: 167000
      height:
        type: integer
        format: dimension
        title: Height
        description: Height recorded as base quantity unit, eg. baseQuantityInch
        minimum: 0
        example: 167000
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
  InvoiceStatus:
    type: string
    title: Status
    enum:
      - DRAFT
      - IN_PROCESS
      - SUBMITTED
      - SUBMISSION_FAILURE
      - UPDATE_FAILURE
    x-display-value:
      DRAFT: Draft
      IN_PROCESS: In Process
      SUBMITTED: Submitted
      SUBMISSION_FAILURE: Submission Failure
      UPDATE_FAILURE: Update Failure
  Invoices:
    type: array
    items:
      $ref: '#/definitions/Invoice'
  Invoice:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      status:
        $ref: '#/definitions/InvoiceStatus'
      approver_first_name:
        type: string
        example: 'Janine'
      approver_last_name:
        type: string
        example: 'Smith'
      invoiced_date:
        type: string
        title: Invoiced date
        format: date-time
      invoice_number:
        type: string
        example: '12432'
  Address:
    type: object
    properties:
      street_address_1:
        type: string
        example: 123 Main Ave
        title: Address line 1
      street_address_2:
        type: string
        example: Apartment 9000
        x-nullable: true
        title: Address line 2
      street_address_3:
        type: string
        example: Montm√¢rtre
        x-nullable: true
        title: Address line 3
      city:
        type: string
        example: Anytown
        title: City
      state:
        title: State
        type: string
        x-display-value:
          AL: AL
          AK: AK
          AR: AR
          AZ: AZ
          CA: CA
          CO: CO
          CT: CT
          DC: DC
          DE: DE
          FL: FL
          GA: GA
          HI: HI
          IA: IA
          ID: ID
          IL: IL
          IN: IN
          KS: KS
          KY: KY
          LA: LA
          MA: MA
          MD: MD
          ME: ME
          MI: MI
          MN: MN
          MO: MO
          MS: MS
          MT: MT
          NC: NC
          ND: ND
          NE: NE
          NH: NH
          NJ: NJ
          NM: NM
          NV: NV
          NY: NY
          OH: OH
          OK: OK
          OR: OR
          PA: PA
          RI: RI
          SC: SC
          SD: SD
          TN: TN
          TX: TX
          UT: UT
          VA: VA
          VT: VT
          WA: WA
          WI: WI
          WV: WV
          WY: WY
        enum:
          - AL
          - AK
          - AR
          - AZ
          - CA
          - CO
          - CT
          - DC
          - DE
          - FL
          - GA
          - HI
          - IA
          - ID
          - IL
          - IN
          - KS
          - KY
          - LA
          - MA
          - MD
          - ME
          - MI
          - MN
          - MO
          - MS
          - MT
          - NC
          - ND
          - NE
          - NH
          - NJ
          - NM
          - NV
          - NY
          - OH
          - OK
          - OR
          - PA
          - RI
          - SC
          - SD
          - TN
          - TX
          - UT
          - VA
          - VT
          - WA
          - WI
          - WV
          - WY
      postal_code:
        type: string
        description: zip code, international allowed
        format: zip
        title: ZIP
        example: "'90210' or 'N15 3NL'"
      country:
        type: string
        title: Country
        x-nullable: true
        example: 'USA'
        default: USA
    required:
      - street_address_1
      - state
      - city
      - postal_code
  Channel:
    type: object
    description: The channel (pickup location & destination region)
    properties:
      origin:
        type: string
        enum: # Add other values
          - US49
        example: US49
      destination:
        type: string
        enum: # Add other values
          - REGION_6
        example: REGION_6
  Claim:
    type: object
    description: A claim resulting from an earlier shipment
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      claim_date:
        type: string
        format: dateTime
        example: 2018-04-12T23:20:50.52Z
      description:
        type: string
        example: 'During shipment the Grandfather clock was dropped resulting in a break to the glass in front of the face'
  CodeOfService:
    type: string
    description: Code for service provided by a TSP
    enum:
      - COS_D
      - COS_2
      - COS_4
      - COS_5
      - COS_6
      - COS_T
      - COS_7
      - COS_8
      - COS_J
      - COS_B
      - COS_H
      - COS_S
    x-display-value:
      COS_D: Loose or containerized household goods CONUS
      COS_2: Moving household goods in containers CONUS
      COS_4: International Door to Door
      COS_5: International Door to Door Container Government Ocean Transport
      COS_6: International Door to Door Air Container
      COS_T: International Door to Door; Air Mobility Command (AMC)
      COS_7: International Land-Water-Land Baggage
      COS_8: International Land-Air-Land Baggage
      COS_J: International Land-Air (AMC)-Land Baggage
      COS_B: Tow-away boat
      COS_H: Haul-away boat
      COS_S: Mobile Home (CONUS)
  Customer:
    type: object
    description: The person moving
    properties:
      given_name:
        type: string
        example: Mary
      family_name:
        type: string
        example: Johnson
  SelectedMoveType:
    type: string
    title: Selected Move Type
    enum:
      - HHG
      - PPM
      - UB
      - POV
      - NTS
      - HHG_PPM
    x-nullable: true
    x-display-value:
      HHG: Household Goods Move
      PPM: Personal Procured Move
      UB: Unaccompanied Baggage
      POV: Privately-Owned Vehicle
      NTS: Non-Temporary Storage
      HHG_PPM: Both HHG and PPM
  ServiceAgentRole:
    type: string
    title: Service Agent Role
    enum:
      - ORIGIN
      - DESTINATION
    x-display-value:
      ORIGIN: Origin
      DESTINATION: Destination
  ServiceMemberRank:
    type: string
    x-nullable: true
    title: Rank
    enum:
      - E_1
      - E_2
      - E_3
      - E_4
      - E_5
      - E_6
      - E_7
      - E_8
      - E_9
      - O_1_ACADEMY_GRADUATE
      - O_2
      - O_3
      - O_4
      - O_5
      - O_6
      - O_7
      - O_8
      - O_9
      - O_10
      - W_1
      - W_2
      - W_3
      - W_4
      - W_5
      - AVIATION_CADET
      - CIVILIAN_EMPLOYEE
      - ACADEMY_CADET
      - MIDSHIPMAN
    x-display-value:
      E_1: E-1
      E_2: E-2
      E_3: E-3
      E_4: E-4
      E_5: E-5
      E_6: E-6
      E_7: E-7
      E_8: E-8
      E_9: E-9
      O_1_ACADEMY_GRADUATE: O-1/Service Academy Graduate
      O_2: O-2
      O_3: O-3
      O_4: O-4
      O_5: O-5
      O_6: O-6
      O_7: O-7
      O_8: O-8
      O_9: O-9
      O_10: O-10
      W_1: W-1
      W_2: W-2
      W_3: W-3
      W_4: W-4
      W_5: W-5
      AVIATION_CADET: Aviation Cadet
      CIVILIAN_EMPLOYEE: Civilian Employee
      ACADEMY_CADET: Service Academy Cadet
      MIDSHIPMAN: Midshipman
  Affiliation:
    type: string
    x-nullable: true
    title: Branch of service
    enum: &AFFILIATION
      - ARMY
      - NAVY
      - MARINES
      - AIR_FORCE
      - COAST_GUARD
    x-display-value:
      ARMY: Army
      NAVY: Navy
      MARINES: Marines
      AIR_FORCE: Air Force
      COAST_GUARD: Coast Guard
  DutyStation:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      name:
        type: string
        example: Fort Bragg North Station
      address:
        $ref: '#/definitions/Address'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - id
      - name
      - address
      - created_at
      - updated_at
  IndexServiceMemberBackupContacts:
    type: array
    items:
      $ref: '#/definitions/ServiceMemberBackupContact'
  ServiceMemberBackupContact:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      service_member_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      name:
        type: string
        example: Susan Smith
        x-nullable: true
        title: Name
      telephone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-5555
        x-nullable: true
        title: Phone
      email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
        x-nullable: true
        title: Email
      permission:
        $ref: '#/definitions/BackupContactPermission'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - id
      - service_member_id
      - created_at
      - updated_at
      - name
      - email
      - permission
  BackupContactPermission:
    type: string
    title: Backup Contact Permissions
    example: VIEW
    enum:
      - NONE
      - VIEW
      - EDIT
    x-display-value:
      NONE: Contact Only
      VIEW: View all move details
      EDIT: View and edit all move details
  WeightAllotment:
    type: object
    properties:
      total_weight_self:
        type: integer
        example: 18000
      total_weight_self_plus_dependents:
        type: integer
        example: 18000
      pro_gear_weight:
        type: integer
        example: 2000
      pro_gear_weight_spouse:
        type: integer
        example: 500
    required:
      - total_weight_self
      - total_weight_self_plus_dependents
      - pro_gear_weight
      - pro_gear_weight_spouse
  ShipmentContactDetails:
    type: object
    description: Contact details for customer for Shipment
    properties:
      primary_name:
        type: string
        description: Name of the primary contact person
        example: Mike Jackson
      primary_title:
        type: string
        example: Lt. Colonel
        description: title of primary contact
      primary_phone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-1212
      primary_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email of primary contact person
        example: mjackson@gmail.com
      secondary_name:
        type: string
        example: Mary Jackson
      secondary_title:
        type: string
        example: Wing Commander
      secondary_phone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-1213
      secondary_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email of secondary contact person
        example: jackson_flies@gmail.com
  ShipmentDates:
    type: object
    description: The various dates associated with a shipment
    properties:
      requested_pack:
        type: string
        format: date
        example: 2018-03-15
      requested_pickup:
        type: string
        format: date
        example: 2018-03-15
      requested_latest_pickup:
        type: string
        format: date
        example: 2018-03-15
      requested_delivery:
        type: string
        format: date
        example: 2018-03-15
      planned_pack:
        type: string
        format: date
        example: 2018-03-15
      planned_pickup:
        type: string
        format: date
        example: 2018-03-15
      planned_latest_pickup:
        type: string
        format: date
        example: 2018-03-15
      planned_delivery:
        type: string
        format: date
        example: 2018-03-15
      scheduled_delivery:
        type: string
        format: date
        example: 2018-03-15
      required_delivery:
        type: string
        format: date
        example: 2018-03-15
      actual_pack:
        type: string
        format: date
        example: 2018-03-15
      actual_pickup_date:
        type: string
        format: date
        example: 2018-03-15
      actual_delivery:
        type: string
        format: date
        example: 2018-03-15
  ShipmentMarket:
    type: string
    description: One of the possible 'Markets' for a shipment
    example: dHHG
    enum:
      - dHHG
      - iHHG
      - iUB
    x-display-value:
      dHHG: Domestic HHG
      iHHG: International HHG
      iUB: International unaccompanied baggage
    x-nullable: true
  ShipmentStatus:
    type: string
    description: The stages in the lifecycle of a Shipment
    example: IN_PROGRESS
    enum: &SHIPMENTSTATUS
      - DRAFT
      - SUBMITTED
      - AWARDED
      - ACCEPTED
      - APPROVED
      - IN_TRANSIT
      - DELIVERED
    x-display-value:
      DRAFT: Draft
      SUBMITTED: Submitted
      AWARDED: Awarded
      ACCEPTED: Accepted
      APPROVED: Approved
      IN_TRANSIT: In Transit
      DELIVERED: Delivered
  TransportPayload:
    type: object
    properties:
      actual_pickup_date:
        type: string
        format: date
        example: '2018-04-02'
        title: Actual Pickup Date
        x-nullable: true
      actual_pack_date:
        type: string
        format: date
        example: '2018-04-02'
        title: Actual Pack Date
        x-nullable: true
      net_weight:
        type: integer
        description: Actual net weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Net
      gross_weight:
        type: integer
        description: Gross weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Gross
      tare_weight:
        type: integer
        description: Tare weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Tare
    required:
      - actual_pickup_date
      - actual_pack_date
      - net_weight
  ActualDeliveryDate:
    type: object
    properties:
      actual_delivery_date:
        type: string
        format: date
        example: '2018-04-02'
        x-nullable: true
        title: Actual Delivery Date
    required:
      - actual_delivery_date
  TSP:
    type: object
    description: The primary definition of a Transport Service Provider
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      name:
        type: string
        example: Moving Company, Inc.
        minLength: 1
        maxLength: 1024
      scac:
        type: string
        description: The SCAC associated with the TSP
        format: '^[A-Z]{2,4}$'
        example: USPS
      contact_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
  InvalidRequestResponsePayload:
    type: object
    properties:
      errors:
        type: object
        additionalProperties:
          type: string
  StorageInTransit:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      location:
        type: string
        title: SIT Location
        enum:
          - ORIGIN
          - DESTINATION
        x-display-value:
          ORIGIN: Origin
          DESTINATION: Destination
      estimated_start_date:
        type: string
        format: date
        example: '2018-04-26'
        title: Estimated start date
      authorized_start_date:
        type: string
        format: date
        x-nullable: true
        example: '2018-04-26'
        title: Authorized Start Date
      actual_start_date:
        type: string
        format: date
        x-nullable: true
        example: '2018-04-26'
        title: Actual Start Date
      out_date:
        type: string
        format: date
        x-nullable: true
        example: '2018-04-26'
        title: Out Date
      notes:
        type: string
        example: Good to go!
        format: textarea
        x-nullable: true
        title: Note
      authorization_notes:
        type: string
        example: Good to go!
        format: textarea
        x-nullable: true
        title: Authorization Notes
      warehouse_id:
        type: string
        example: '000383'
        title: Warehouse ID number
      warehouse_name:
        type: string
        example: ABC Warehouse, Inc.
        title: Warehouse Name
      warehouse_phone:
        type: string
        format: telephone
        pattern: '^$|^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-5555
        x-nullable: true
        title: Phone
      warehouse_email:
        type: string
        format: x-email
        pattern: '^$|^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
        x-nullable: true
        title: Email
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        title: Shipment ID
      sit_number:
        type: string
        x-nullable: true
        example: 123456
        title: SIT Number
      status:
        type: string
        example: REQUESTED
        title: Status
      warehouse_address:
        $ref: '#/definitions/Address'
    required:
      - location
      - warehouse_address
      - warehouse_id
      - warehouse_name
      - estimated_start_date
  StorageInTransits:
    type: array
    items:
      $ref: '#/definitions/StorageInTransit'
  StorageInTransitApprovalPayload:
    type: object
    properties:
      authorization_notes:
        type: string
        format: textarea
        example: Good to go!
        title: Authorization Notes
        x-nullable: true
      authorized_start_date:
        type: string
        format: date
        example: '2018-04-26'
        title: Authorized Start Date
  StorageInTransitDenialPayload:
    type: object
    properties:
      authorization_notes:
        type: string
        format: textarea
        example: Good to go!
        title: Authorization Notes
  StorageInTransitInSitPayload:
    type: object
    properties:
      actual_start_date:
        type: string
        format: date
        example: '2018-04-26'
        title: Actual Start date
  StorageInTransitReleasePayload:
    type: object
    properties:
      released_on:
        type: string
        format: date
        example: '2018-04-26'
        title: Released On Date
  AccessCode:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      service_member_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      code:
        type: string
        example: CODE456
      move_type:
        type: string
        title: Selected Move Type
        enum:
          - HHG
          - PPM
      created_at:
        type: string
        format: datetime
        example: 2018-04-12T23:20:50.52Z
        description: when the access code was created
      claimed_at:
        type: string
        format: datetime
        example: 2018-04-12T23:20:50.52Z
        description: when the access code was claimed or used
        x-nullable: true
    required:
      - id
      - code
      - move_type
      - created_at
paths:
  /shipments/{shipmentId}/storage_in_transits:
    get:
      summary: Gets storage in transit entries for shipment
      description: Allows a user to retrieve a list of storage in transit entires for a shipment.
      operationId: indexStorageInTransits
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
      responses:
        200:
          description: returns an array of storage in transit entires
          schema:
            $ref: '#/definitions/StorageInTransits'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this end point
        403:
          description: not authorized to list these storage in transit entries
        422:
          description: cannot process request with given information
        500:
          description: server error
    post:
      summary: Create a storage in transit entry
      description: Creates a new storage in transit entry associated with a shipment
      operationId: createStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: storageInTransit
          in: body
          required: true
          description: Storage In Transit information
          schema:
            $ref: '#/definitions/StorageInTransit'
      responses:
        201:
          description: successfully created Storage In Transit
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this end point
        403:
          description: not authorized to add transit in storage entires to this shipment
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}:
    get:
      summary: Gets a particular Storage In Transit for a shipment
      description: Allows a user to retrieve a specific Storage In Transit entry for a shipment
      operationId: getStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the Storage in Transit entry
      responses:
        200:
          description: returns the details of a storage in transit entry
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to view the details of this storage in transit entry
        404:
          description: storage in transit UUID not found in system
        500:
          description: server error
    patch:
      summary: Updates an particular Storage In Transit entry
      description: Allows changes to be made to a particular Storage In Transit entry
      operationId: patchStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          description: UUID of storage in transit
          required: true
        - name: storageInTransit
          in: body
          required: true
          schema:
            $ref: '#/definitions/StorageInTransit'
      responses:
        200:
          description: returns the details of the storage in transit entry
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to update the details of this service agent
        404:
          description: storage in transit UUID not found in system
        500:
          description: server error
    delete:
      summary: Deletes a particular Storage In Transit entry related to a shipment
      operationId: deleteStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          description: UUID of storage in transit
          required: true
      responses:
        200:
          description: the storage in transit entry was successfully deleted
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated storage in transit entry
        404:
          description: no service agent found with that UUID
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}/approve:
    post:
      summary: Approves a requested storage in transit
      operationId: approveStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of storage in transit
        - in: body
          name: storageInTransitApprovalPayload
          required: true
          schema:
            $ref: '#/definitions/StorageInTransitApprovalPayload'
      responses:
        200:
          description: returns storage in transit that was approved
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to approve this storage in transit
        409:
          description: the storage in transit is not in an appropriate state to be approved
          schema:
            $ref: '#/definitions/StorageInTransit'
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}/deny:
    post:
      summary: Denies a requested storage in transit
      operationId: denyStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of storage in transit
        - in: body
          name: storageInTransitDenyPayload
          required: true
          schema:
            $ref: '#/definitions/StorageInTransitDenialPayload'
      responses:
        200:
          description: returns storage in transit that was denied
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to deny this storage in transit
          schema:
            $ref: '#/definitions/StorageInTransit'
        409:
          description: the storage in transit is not in an appropriate state to be approved
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}/place_in_sit:
    post:
      summary: Places a storage in transit into 'IN_SIT'
      operationId: inSitStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of storage in transit
        - name: storageInTransitInSitPayload
          in: body
          schema:
            $ref: '#/definitions/StorageInTransitInSitPayload'
      responses:
        200:
          description: returns storage in transit that was put into in_sit
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to in_sit this storage in transit
        409:
          description: the storage in transit is not in an appropriate state to be put in_sit
          schema:
            $ref: '#/definitions/StorageInTransit'
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}/release:
    post:
      summary: Releases a requested storage in transit
      operationId: releaseStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of storage in transit
        - name: storageInTransitOnReleasePayload
          in: body
          schema:
            $ref: '#/definitions/StorageInTransitReleasePayload'
      responses:
        200:
          description: returns storage in transit that was released
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to release this storage in transit
        409:
          description: the storage in transit is not in an appropriate state to be released
          schema:
            $ref: '#/definitions/StorageInTransit'
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}/deliver:
    post:
      summary: Delivers a requested storage in transit
      operationId: deliverStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of storage in transit
      responses:
        200:
          description: returns storage in transit that was delivered
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to deliver this storage in transit
        409:
          description: the storage in transit is not in an appropriate state to be delivered
          schema:
            $ref: '#/definitions/StorageInTransit'
        500:
          description: server error
  /tsps:
    get:
      summary: List all TSPs
      description: Gets a list of all the TSPs which the logged in user has access to.
      operationId: indexTSPs
      tags:
        - tsps
      x-access: Access to this endpoint is restricted to members of the Admin, Transcom & JPPSO user groups
      responses:
        200:
          description: list of TSPs
          schema:
            type: array
            items:
              $ref: '#/definitions/TSP'
        400:
          description: invalid request
        401:
          description: must be authenticated to access this endpoint
        500:
          description: server error
  /access_codes:
    get:
      summary: Fetches an access code
      description: Fetches the access code for a service member.
      operationId: fetchAccessCode
      tags:
        - accesscode
      responses:
        200:
          description: access code has been found in system
          schema:
            $ref: '#/definitions/AccessCode'
        400:
          description: invalid request
        401:
          description: not authorized to fetch access code
        404:
          description: access code not found in system
        500:
          description: server error
  /access_codes/valid:
    get:
      summary: Validate if an access code has been unused and associated with the correct move type.
      description: Verifies if access code is both unused and correctly associated with a move type.
      operationId: validateAccessCode
      tags:
        - accesscode
      parameters:
        - in: query
          name: code
          type: string
          description: the code the access code represents and verifies if in use
          pattern: '^(HHG|PPM)-[A-Z0-9]{6}$'
          x-nullable: false
      responses:
        200:
          description: access code is invalid or valid
          schema:
            $ref: '#/definitions/AccessCode'
        400:
          description: invalid request
        401:
          description: not authorized to validate access code
        404:
          description: access code not found in system
        500:
          description: server error
  /access_codes/invalid:
    patch:
      summary: Updates access code as invalid by associating it with the current service member.
      description: Updates access code as invalid by associating it with the current service member.
      operationId: claimAccessCode
      tags:
        - accesscode
      parameters:
        - in: body
          name: accessCode
          description: the code the access code represents and verifies if in use
          required: true
          schema:
            type: object
            required:
              - code
            properties:
              code:
                type: string
      responses:
        200:
          description: access code is invalid or valid
          schema:
            $ref: '#/definitions/AccessCode'
        400:
          description: invalid request
        401:
          description: not authorized to validate access code
        404:
          description: access code not found in system
        500:
          description: server error

  /transportation_service_provider_performances/{transportationServiceProviderPerformanceId}:
    get:
      summary: Logs a Transportation Service Provider Performance
      description: Logs a Transportation Service Provider Performance
      operationId: logTransportationServiceProviderPerformance
      tags:
        - transportation_service_provider_performance
      parameters:
        - name: transportationServiceProviderPerformanceId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the Transportation Service Provider Performance
      responses:
        204:
          description: the Transportation Service Provider Performance was logged
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to log the details of this Transportation Service Provider Performance
        500:
          description: server error
