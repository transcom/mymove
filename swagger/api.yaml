swagger: '2.0'
info:
  description: The public API for my.move.mil. This is a work in-progress, and is not a final product. We will be continuously updating this site based on feedback.
  version: 0.0.1
  title: my.move.mil
  license:
    name: MIT
    url: https://github.com/transcom/mymove/blob/master/LICENSE.md
basePath: /api/v1
consumes:
  - application/json
produces:
  - application/json
definitions:
  MoveDocuments:
    type: array
    items:
      $ref: '#/definitions/MoveDocumentPayload'
  MoveDocumentPayload:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        x-nullable: true
      document:
        $ref: '#/definitions/DocumentPayload'
      title:
        type: string
        example: very_useful_document.pdf
        title: Document Title
      move_document_type:
        $ref: '#/definitions/MoveDocumentType'
      status:
        $ref: '#/definitions/MoveDocumentStatus'
      notes:
        type: string
        example: This document is good to go!
        x-nullable: true
        title: Notes
    required:
      - id
      - shipment_id
      - document
      - title
      - move_document_type
      - status
  CreateGenericMoveDocumentPayload:
    type: object
    properties:
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        x-nullable: true
      upload_ids:
        type: array
        items:
          type: string
          format: uuid
          example: c56a4180-65aa-42ec-a945-5fd21dec0538
      title:
        type: string
        example: very_useful_document.pdf
      move_document_type:
        $ref: '#/definitions/MoveDocumentType'
      notes:
        type: string
        example: This document is good to go!
        x-nullable: true
        title: Notes
    required:
      - upload_ids
      - title
      - move_document_type
  MoveDocumentStatus:
    type: string
    title: Document Status
    enum:
      - AWAITING_REVIEW
      - OK
      - HAS_ISSUE
    x-display-value:
      AWAITING_REVIEW: Awaiting review
      OK: OK
      HAS_ISSUE: Has issue
  DocumentPayload:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      uploads:
        type: array
        items:
          $ref: '#/definitions/UploadPayload'
    required:
      - id
      - uploads
  UploadPayload:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      url:
        type: string
        format: uri
        example: https://uploads.domain.test/dir/c56a4180-65aa-42ec-a945-5fd21dec0538
      filename:
        type: string
        format: string
        example: filename.pdf
      content_type:
        type: string
        format: mime-type
        example: application/pdf
      bytes:
        type: integer
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - id
      - url
      - filename
      - content_type
      - bytes
      - created_at
      - updated_at
  Tariff400ngItemLocation:
    type: string
    title: Location
    enum:
      - ORIGIN
      - DESTINATION
      - NEITHER
      - EITHER
    x-display-value:
      ORIGIN: Origin
      DESTINATION: Destination
      NEITHER: Neither
      EITHER: Either
  DistanceCalculation:
    type: object
    properties:
      origin_address:
        $ref: '#/definitions/Address'
      destination_address:
        $ref: '#/definitions/Address'
      distance_miles:
        type: integer
        title: Distance
        description: unit is miles
  ShipmentLineItemLocation:
    type: string
    title: Location
    enum:
      - ORIGIN
      - DESTINATION
      - NEITHER
    x-display-value:
      ORIGIN: Origin
      DESTINATION: Destination
      NEITHER: Neither
  ShipmentLineItemStatus:
    type: string
    title: Status
    enum:
      - SUBMITTED
      - APPROVED
      - INVOICED
    x-display-value:
      SUBMITTED: Submitted
      APPROVED: Approved
      INVOICED: Invoiced
  Dimensions:
    type: object
    format: dimensions
    properties:
      length:
        type: integer
        format: dimension
        title: Length
        description: Length recorded as base quantity unit, eg. baseQuantityInch
        minimum: 0
        example: 167000
      width:
        type: integer
        format: dimension
        title: Width
        description: Width recorded as base quantity unit, eg. baseQuantityInch
        minimum: 0
        example: 167000
      height:
        type: integer
        format: dimension
        title: Height
        description: Height recorded as base quantity unit, eg. baseQuantityInch
        minimum: 0
        example: 167000
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
  InvoiceStatus:
    type: string
    title: Status
    enum:
      - DRAFT
      - IN_PROCESS
      - SUBMITTED
      - SUBMISSION_FAILURE
      - UPDATE_FAILURE
    x-display-value:
      DRAFT: Draft
      IN_PROCESS: In Process
      SUBMITTED: Submitted
      SUBMISSION_FAILURE: Submission Failure
      UPDATE_FAILURE: Update Failure
  Tariff400ngItems:
    type: array
    items:
      $ref: '#/definitions/Tariff400ngItem'
  Tariff400ngItem:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      code:
        type: string
        title: Code
        example: 105B
      discount_type:
        type: string
        title: Discount
        example: dHHG
      location:
        $ref: '#/definitions/Tariff400ngItemLocation'
      item:
        type: string
        title: Item
        example: Linehaul Transportation
      uom_1:
        type: string
        title: 1st UOM
        example: Days
      uom_2:
        type: string
        title: 2nd UOM
        example: Net Billing Weight
      ref_code:
        type: string
        title: Reference Code
        example: Point Schedule
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      requires_pre_approval:
        type: boolean
        title: Requires pre-approval
  Invoices:
    type: array
    items:
      $ref: '#/definitions/Invoice'
  Invoice:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      status:
        $ref: '#/definitions/InvoiceStatus'
      approver_first_name:
        type: string
        example: 'Janine'
      approver_last_name:
        type: string
        example: 'Smith'
      invoiced_date:
        type: string
        title: Invoiced date
        format: date-time
      invoice_number:
        type: string
        example: '12432'
  ShipmentLineItems:
    type: array
    items:
      $ref: '#/definitions/ShipmentLineItem'
  ShipmentLineItem:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      tariff400ng_item:
        $ref: '#/definitions/Tariff400ngItem'
      tariff400ng_item_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      quantity_1:
        type: integer
        format: basequantity
        title: Base Quantity
        description: 1st Tariff400ngItem base quantity
        minimum: 0
        example: 167000
      quantity_2:
        type: integer
        format: basequantity
        title: 2nd Quantity
        description: 2nd Tariff400ngItem base quantity
        minimum: 0
        example: 10000
      applied_rate:
        type: integer
        format: millicents
        minimum: 0
        x-nullable: true
        description: unit is millicents
      location:
        $ref: '#/definitions/ShipmentLineItemLocation'
      description:
        type: string
        format: textarea
        title: Description
        example: Mounted deer head
        x-nullable: true
      reason:
        type: string
        format: textarea
        title: Reason
        example: Too large to be transported safely
        x-nullable: true
      crate_dimensions:
        $ref: '#/definitions/Dimensions'
        x-nullable: true
      item_dimensions:
        $ref: '#/definitions/Dimensions'
        x-nullable: true
      notes:
        type: string
        format: textarea
        title: Notes
        example: Needed for gun safe moving
      status:
        $ref: '#/definitions/ShipmentLineItemStatus'
      invoice_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        x-nullable: true
      estimate_amount_cents:
        type: integer
        format: cents
        minimum: 1
        title: Estimate amount
        description: Used for storing estimate cost of a service or charge.
        x-nullable: true
      actual_amount_cents:
        type: integer
        format: cents
        minimum: 1
        title: Actual amount
        description: Used for storing actual cost of a service or charge.
        x-nullable: true
      amount_cents:
        type: integer
        format: cents
        minimum: 1
        title: Amount
        description: Unit is cents. Used for storing line haul charges.
        x-nullable: true
      date:
        type: string
        description: date of service or charge
        format: date
        example: '2018-10-21'
        x-nullable: true
      time:
        type: string
        description: time of service or charge in military time
        example: '0400'
        x-nullable: true
      address:
        $ref: '#/definitions/Address'
        x-nullable: true
      submitted_date:
        type: string
        title: Submitted Date
        format: date-time
      approved_date:
        type: string
        title: Approved Date
        format: date-time
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - tariff400ng_item_id
      - location
  Address:
    type: object
    properties:
      street_address_1:
        type: string
        example: 123 Main Ave
        title: Address Line 1
      street_address_2:
        type: string
        example: Apartment 9000
        x-nullable: true
        title: Address Line 2
      street_address_3:
        type: string
        example: Montmârtre
        x-nullable: true
        title: Address Line 3
      city:
        type: string
        example: Anytown
        title: City
      state:
        title: State
        type: string
        example: CA
      postal_code:
        type: string
        description: zip code, international allowed
        format: zip
        title: ZIP/Postal Code
        example: "'90210' or 'N15 3NL'"
      country:
        type: string
        title: Country
        x-nullable: true
        example: 'USA'
        default: USA
    required:
      - street_address_1
      - state
      - city
      - postal_code
  IndexBlackoutsPayload:
    type: array
    items:
      $ref: '#/definitions/BlackoutPayload'
  CreateBlackoutPayload:
    type: object
    properties:
      start_date:
        type: string
        description: the first day to blackout
        format: date
        example: 2018-10-21
      end_date:
        type: string
        description: the first day after the blackout ends
        format: date
        example: 2018-10-29
      gbloc:
        $ref: '#/definitions/GBLOC'
      zip3:
        type: string
        description: restricts the search to blackout periods with an explicit source rate area (zip3)
        example: 941
        pattern: '^[0-9]{3}$'
      channel:
        $ref: '#/definitions/Channel'
      market:
        $ref: '#/definitions/ShipmentMarket'
      code_of_service:
        $ref: '#/definitions/CodeOfService'
    required:
      - start_date
      - end_date
  BlackoutPayload:
    type: object
    properties:
      id:
        type: string
        description: unique id of the blackout in the system
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      tsp_id:
        type: string
        description: ID of the TSP filing this blackout
        format: uuid
      start_date:
        type: string
        description: the first day to blackout
        format: date
        example: 2018-10-21
      end_date:
        type: string
        description: the first day after the blackout ends
        format: date
        example: 2018-10-29
      gbloc:
        $ref: '#/definitions/GBLOC'
      zip3:
        type: string
        description: restricts the search to blackout periods with an explicit source rate area (zip3)
        example: 941
        pattern: '^[0-9]{3}$'
      channel:
        $ref: '#/definitions/Channel'
      market:
        $ref: '#/definitions/ShipmentMarket'
      code_of_service:
        $ref: '#/definitions/CodeOfService'
    required:
      - start_date
      - end_date
  Channel:
    type: object
    description: The channel (pickup location & destination region)
    properties:
      origin:
        type: string
        enum: # Add other values
          - US49
        example: US49
      destination:
        type: string
        enum: # Add other values
          - REGION_6
        example: REGION_6
  Document:
    type: object
    description: A document is one or more uploaded files (usually images or PDFs) which can be associated with a shipment
    properties:
      id:
        type: string
        format: uuid
        description: Unique ID for this document within the system
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      name:
        type: string
        description: Human readable name for the document
        example: Preload Weight Ticket 2017-10-21
        maxLength: 1024
      uploads:
        type: array
        items:
          $ref: '#/definitions/DocumentUpload'
      created:
        type: string
        format: dateTime
        example: 2018-04-12T23:20:50.52Z
        description: When the document was created
      last_modified:
        type: string
        format: dateTime
        example: 2018-04-12T23:22:30.52Z
        description: When the document was last added to
      upload_url:
        type: string
        format: uri
        example: https://test_api.move.mil/api/v1/documents/c56a4180-65aa-42ec-a945-5fd21dec0538/uploads
        description: Location to which uploads should be posted.
    required:
      - name
  DocumentUpload:
    type: object
    description: Details of a file uploaded as part of a Document. Usually, but not always, an image or PDF
    properties:
      id:
        type: string
        format: uuid
        description: Unique ID for this object
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      name:
        type: string
        description: Human readable name for the document
        example: Page 3
        maxLength: 1024
      uploaded:
        type: string
        format: dateTime
        description: When the Upload was created
        example: 2018-04-12T23:22:30.52Z
      mime_type:
        type: string
        description: The mime type for the file
        example: 'application/pdf'
        enum:
          - application/pdf
          - image/jpeg
          - image/png
    required:
      - name
  Claim:
    type: object
    description: A claim resulting from an earlier shipment
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      claim_date:
        type: string
        format: dateTime
        example: 2018-04-12T23:20:50.52Z
      description:
        type: string
        example: 'During shipment the Grandfather clock was dropped resulting in a break to the glass in front of the face'
  CodeOfService:
    type: string
    description: Code for service provided by a TSP
    enum:
      - COS_D
      - COS_2
      - COS_4
      - COS_5
      - COS_6
      - COS_T
      - COS_7
      - COS_8
      - COS_J
      - COS_B
      - COS_H
      - COS_S
    x-display-value:
      COS_D: Loose or containerized household goods CONUS
      COS_2: Moving household goods in containers CONUS
      COS_4: International Door to Door
      COS_5: International Door to Door Container Government Ocean Transport
      COS_6: International Door to Door Air Container
      COS_T: International Door to Door; Air Mobility Command (AMC)
      COS_7: International Land-Water-Land Baggage
      COS_8: International Land-Air-Land Baggage
      COS_J: International Land-Air (AMC)-Land Baggage
      COS_B: Tow-away boat
      COS_H: Haul-away boat
      COS_S: Mobile Home (CONUS)
  Customer:
    type: object
    description: The person moving
    properties:
      given_name:
        type: string
        example: Mary
      family_name:
        type: string
        example: Johnson
  GBLOC:
    type: string
    description: Office Codes for Transcom offices originating GBLs
    pattern: '^[A-Z]{4}$'
    example: LHNQ
    x-nullable: true
  IndexShipments:
    type: array
    items:
      $ref: '#/definitions/Shipment'
  Move:
    type: object
    properties:
      selected_move_type:
        $ref: '#/definitions/SelectedMoveType'
      orders_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      has_dependents:
        type: boolean
        title: Are dependents included in your orders?
        default: false
      spouse_has_pro_gear:
        type: boolean
        title: Do you have a spouse who will need to move items related to their occupation (also known as spouse pro-gear)?
        default: false
      status:
        $ref: '#/definitions/MoveStatus'
      locator:
        type: string
        example: '12432'
      cancel_reason:
        type: string
        example: 'Change of orders'
        x-nullable: true
      new_duty_station:
        $ref: '#/definitions/DutyStation'
    required:
      - orders_id
      - locator
  MoveStatus:
    type: string
    title: Move status
    enum:
      - DRAFT
      - SUBMITTED
      - APPROVED
      - COMPLETED
      - CANCELED
    x-display-value:
      DRAFT: Draft
      SUBMITTED: Submitted
      APPROVED: Approved
      COMPLETED: Completed
      CANCELED: Canceled
  MoveDocumentType:
    type: string
    title: Document Type
    example: WEIGHT_TICKET
    enum: &MOVEDOCUMENTTYPE
      - WEIGHT_TICKET
      - WEIGHT_TICKET_REWEIGH
      - ORIGIN_PACKET
      - ORIGIN_619
      - ORIGIN_INVENTORY
      - DESTINATION_PACKET
      - DESTINATION_619
      - DESTINATION_619_1
      - DESTINATION_INVENTORY
      - THIRD_PARTY_INVOICE
      - THIRD_PARTY_ESTIMATE
      - NOTICE_OF_LOSS_OR_DAMAGE
      - FIREARMS_CHAIN_OF_CUSTODY
      - PHOTO
      - OTHER
    x-display-value:
      WEIGHT_TICKET: Weight ticket
      WEIGHT_TICKET_REWEIGH: Weight ticket reweigh
      ORIGIN_PACKET: Origin packet
      ORIGIN_619: Origin 619
      ORIGIN_INVENTORY: Origin inventory
      DESTINATION_PACKET: Destination packet
      DESTINATION_619: Destination 619
      DESTINATION_619_1: Origin 619-1
      DESTINATION_INVENTORY: Destination inventory
      THIRD_PARTY_INVOICE: 3rd-party invoice
      THIRD_PARTY_ESTIMATE: 3rd-party estimate
      NOTICE_OF_LOSS_OR_DAMAGE: 1850 - Notice of loss/damage
      FIREARMS_CHAIN_OF_CUSTODY: Firearms chain of custody
      PHOTO: Photo
      OTHER: Other document type
  SelectedMoveType:
    type: string
    title: Selected Move Type
    enum:
      - HHG
      - PPM
      - UB
      - POV
      - NTS
      - HHG_PPM
    x-nullable: true
    x-display-value:
      HHG: Household Goods Move
      PPM: Personal Procured Move
      UB: Unaccompanied Baggage
      POV: Privately-Owned Vehicle
      NTS: Non-Temporary Storage
      HHG_PPM: Both HHG and PPM
  ServiceAgentRole:
    type: string
    title: Service Agent Role
    enum:
      - ORIGIN
      - DESTINATION
    x-display-value:
      ORIGIN: Origin
      DESTINATION: Destination
  ServiceMemberRank:
    type: string
    x-nullable: true
    title: Rank
    enum:
      - E_1
      - E_2
      - E_3
      - E_4
      - E_5
      - E_6
      - E_7
      - E_8
      - E_9
      - O_1_ACADEMY_GRADUATE
      - O_2
      - O_3
      - O_4
      - O_5
      - O_6
      - O_7
      - O_8
      - O_9
      - O_10
      - W_1
      - W_2
      - W_3
      - W_4
      - W_5
      - AVIATION_CADET
      - CIVILIAN_EMPLOYEE
      - ACADEMY_CADET
      - MIDSHIPMAN
    x-display-value:
      E_1: E-1
      E_2: E-2
      E_3: E-3
      E_4: E-4
      E_5: E-5
      E_6: E-6
      E_7: E-7
      E_8: E-8
      E_9: E-9
      O_1_ACADEMY_GRADUATE: O-1/Service Academy Graduate
      O_2: O-2
      O_3: O-3
      O_4: O-4
      O_5: O-5
      O_6: O-6
      O_7: O-7
      O_8: O-8
      O_9: O-9
      O_10: O-10
      W_1: W-1
      W_2: W-2
      W_3: W-3
      W_4: W-4
      W_5: W-5
      AVIATION_CADET: Aviation Cadet
      CIVILIAN_EMPLOYEE: Civilian Employee
      ACADEMY_CADET: Service Academy Cadet
      MIDSHIPMAN: Midshipman
  Affiliation:
    type: string
    x-nullable: true
    title: Branch of service
    enum: &AFFILIATION
      - ARMY
      - NAVY
      - MARINES
      - AIR_FORCE
      - COAST_GUARD
    x-display-value:
      ARMY: Army
      NAVY: Navy
      MARINES: Marines
      AIR_FORCE: Air Force
      COAST_GUARD: Coast Guard
  DutyStation:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      name:
        type: string
        format: string
        example: Fort Bragg North Station
      address:
        $ref: '#/definitions/Address'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - id
      - name
      - address
      - created_at
      - updated_at
  ServiceMember:
    type: object
    properties:
      first_name:
        type: string
        example: John
        x-nullable: true
        title: First Name
      middle_name:
        type: string
        example: L.
        x-nullable: true
        title: Middle Name
      last_name:
        type: string
        example: Donut
        x-nullable: true
        title: Last Name
      edipi:
        type: string
        format: edipi
        example: '5789345789'
        pattern: '^[0-9]{10}$'
        x-nullable: true
        title: DoD ID number
      affiliation:
        $ref: '#/definitions/Affiliation'
        title: Branch
      rank:
        $ref: '#/definitions/ServiceMemberRank'
        title: Rank
      suffix:
        type: string
        example: Jr.
        x-nullable: true
        title: Suffix
      telephone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-5555
        x-nullable: true
        title: Best Contact Phone
      secondary_telephone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-5555
        x-nullable: true
        title: Secondary Phone
      personal_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
        x-nullable: true
        title: Personal Email Address
      phone_is_preferred:
        type: boolean
        x-nullable: true
        title: Telephone
      text_message_is_preferred:
        type: boolean
        x-nullable: true
        title: Text Message - Coming Soon!
      email_is_preferred:
        type: boolean
        x-nullable: true
        title: Email
      backup_contacts:
        $ref: '#/definitions/IndexServiceMemberBackupContacts'
  IndexServiceMemberBackupContacts:
    type: array
    items:
      $ref: '#/definitions/ServiceMemberBackupContact'
  ServiceMemberBackupContact:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      service_member_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      name:
        type: string
        example: Susan Smith
        x-nullable: true
        title: Name
      telephone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-5555
        x-nullable: true
        title: Phone
      email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
        x-nullable: true
        title: Email
      permission:
        $ref: '#/definitions/BackupContactPermission'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - id
      - service_member_id
      - created_at
      - updated_at
      - name
      - email
      - permission
  BackupContactPermission:
    type: string
    title: Backup Contact Permissions
    example: VIEW
    enum:
      - NONE
      - VIEW
      - EDIT
    x-display-value:
      NONE: Contact Only
      VIEW: View all move details
      EDIT: View and edit all move details
  TrafficDistributionList:
    type: object
    properties:
      source_rate_area:
        type: string
        example: US34
      destination_region:
        type: string
        example: '5'
      code_of_service:
        type: string
        example: D
        enum:
          - D
          - '2'
    required:
      - source_rate_area
      - destination_region
      - code_of_service
  Shipment:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      status:
        $ref: '#/definitions/ShipmentStatus'
        readOnly: true
      source_gbloc:
        $ref: '#/definitions/GBLOC'
        readOnly: true
      destination_gbloc:
        $ref: '#/definitions/GBLOC'
        readOnly: true
      gbl_number:
        type: string
        example: 'KKFA9999999'
        x-nullable: true
        title: GBL Number
      market:
        $ref: '#/definitions/ShipmentMarket'
        readOnly: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      traffic_distribution_list_id:
        type: string
        format: uuid
        example: d56a4180-65aa-42ec-a945-5fd21dec0538
        x-nullable: true
      traffic_distribution_list:
        $ref: '#/definitions/TrafficDistributionList'
        readOnly: true
      service_member_id:
        type: string
        format: uuid
        example: d56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      service_member:
        $ref: '#/definitions/ServiceMember'
        readOnly: true
      move_id:
        type: string
        format: uuid
        example: d56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      move:
        $ref: '#/definitions/Move'
        x-nullable: true
      book_date:
        type: string
        format: date
        example: '2018-04-26'
        readOnly: true
        x-nullable: true
      requested_pickup_date:
        type: string
        format: date
        example: '2018-04-26'
        x-nullable: true
      original_delivery_date:
        type: string
        format: date
        example: '2018-04-26'
        readOnly: true
        x-nullable: true
      original_pack_date:
        type: string
        format: date
        example: '2018-04-26'
        readOnly: true
        x-nullable: true
      actual_pickup_date:
        type: string
        format: date
        example: '2018-04-26'
        readOnly: true
        x-nullable: true
      actual_pack_date:
        type: string
        format: date
        example: '2018-04-26'
        readOnly: true
        x-nullable: true
      actual_delivery_date:
        type: string
        format: date
        example: '2018-04-26'
        readOnly: true
        x-nullable: true
      estimated_pack_days:
        description: Estimated days packing
        type: integer
        minimum: 0
        example: 3
        readOnly: true
        x-nullable: true
      estimated_transit_days:
        description: Estimated days in transit
        type: integer
        minimum: 0
        example: 30
        readOnly: true
        x-nullable: true
      pickup_address:
        $ref: '#/definitions/Address'
        x-nullable: true
      has_secondary_pickup_address:
        type: boolean
        default: false
        title: 'Do you have household goods at any other pickup location?'
      secondary_pickup_address:
        $ref: '#/definitions/Address'
        x-nullable: true
      has_delivery_address:
        type: boolean
        default: false
        title: 'Do you know the delivery address at destination yet?'
      delivery_address:
        $ref: '#/definitions/Address'
        x-nullable: true
      shipping_distance:
        $ref: '#/definitions/DistanceCalculation'
      has_partial_sit_delivery_address:
        type: boolean
        default: false
        title: 'Will some of your items be stored in transit?'
      partial_sit_delivery_address:
        $ref: '#/definitions/Address'
        x-nullable: true
      weight_estimate:
        type: integer
        description: Estimated weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Weight Estimate
      progear_weight_estimate:
        type: integer
        description: Estimated weight of the progear in lbs
        minimum: 0
        example: 500
        x-nullable: true
        x-formatting: weight
        title: Progear Weight Estimate
      spouse_progear_weight_estimate:
        type: integer
        description: Estimated weight of the spouse progear in lbs
        minimum: 0
        example: 200
        x-nullable: true
        x-formatting: weight
        title: Spouse Progear Weight Estimate
      net_weight:
        type: integer
        description: Actual net weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Net
      gross_weight:
        type: integer
        description: Gross weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Gross
      tare_weight:
        type: integer
        description: Tare weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Tare
      pm_survey_completed_at:
        type: string
        format: date-time
        x-nullable: true
      pm_survey_conducted_date:
        type: string
        format: date
        example: '2018-04-26'
        title: 'Conducted'
        x-nullable: true
      pm_survey_planned_pack_date:
        type: string
        format: date
        example: '2018-04-26'
        title: 'Planned pack date'
        x-nullable: true
      pm_survey_planned_pickup_date:
        type: string
        format: date
        example: '2018-04-26'
        title: 'Planned pickup date'
        x-nullable: true
      pm_survey_planned_delivery_date:
        type: string
        format: date
        example: '2018-04-26'
        title: 'Planned delivery date'
        x-nullable: true
      pm_survey_weight_estimate:
        type: integer
        minimum: 0
        example: 10000
        title: Weight
        x-nullable: true
        x-formatting: weight
      pm_survey_progear_weight_estimate:
        type: integer
        minimum: 0
        example: 10000
        title: Pro-Gear weight
        x-nullable: true
        x-formatting: weight
      pm_survey_spouse_progear_weight_estimate:
        type: integer
        minimum: 0
        example: 10000
        title: Spouse's pro-gear
        x-nullable: true
        x-formatting: weight
      pm_survey_notes:
        type: string
        example: This document is good to go!
        format: textarea
        x-nullable: true
        title: Notes about dates
      pm_survey_method:
        type: string
        title: Survey method
        enum:
          - IN_PERSON
          - PHONE
          - VIDEO
        x-display-value:
          IN_PERSON: In person
          PHONE: Phone
          VIDEO: Video
      transportation_service_provider_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
  TransportationServiceProvider:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: 2a6a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      standard_carrier_alpha_code:
        type: string
        example: '51980581983'
        x-nullable: true
        title: SCAC
      enrolled:
        type: boolean
        default: false
      name:
        type: string
        example: 'EXTRA Good TSP'
        x-nullable: true
        title: Name
      poc_general_name:
        type: string
        example: 'Jon Bon Jovi'
        x-nullable: true
      poc_general_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email used to contact shipping agent
        example: jenny_tsp@example.com
        x-nullable: true
        title: Email
      poc_general_phone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 303-867-5309
        x-nullable: true
        title: Phone Number
      poc_claims_name:
        type: string
        example: 'Tupac Shakur'
        x-nullable: true
      poc_claims_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email used to contact shipping agent
        example: tupac_tsp@example.com
        x-nullable: true
        title: Email
      poc_claims_phone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 404-827-5309
        x-nullable: true
        title: Phone Number
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - standard_carrier_alpha_code
      - enrolled
  ServiceAgents:
    type: array
    items:
      $ref: '#/definitions/ServiceAgent'
  ServiceAgent:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        readOnly: true
      shipment_id:
        type: string
        format: uuid
        readOnly: true
      role:
        $ref: '#/definitions/ServiceAgentRole'
      company:
        type: string
        example: ACME Movers
        title: Company
      email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email used to contact shipping agent
        example: jenny_acme@example.com
        x-nullable: true
        title: Email
      phone_number:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 303-867-5309
        x-nullable: true
        title: Phone Number
      fax_number:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 303-867-5310
        x-nullable: true
        title: Fax Number
      email_is_preferred:
        type: boolean
        x-nullable: true
        title: Email Is Preferred
      phone_is_preferred:
        type: boolean
        x-nullable: true
        title: Phone Is Preferred
      notes:
        type: string
        x-nullable: true
        example: This service agent is available at all hours
        title: Notes
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - role
      - company
  ShipmentContactDetails:
    type: object
    description: Contact details for customer for Shipment
    properties:
      primary_name:
        type: string
        description: Name of the primary contact person
        example: Mike Jackson
      primary_title:
        type: string
        example: Lt. Colonel
        description: title of primary contact
      primary_phone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-1212
      primary_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email of primary contact person
        example: mjackson@gmail.com
      secondary_name:
        type: string
        example: Mary Jackson
      secondary_title:
        type: string
        example: Wing Commander
      secondary_phone:
        type: string
        format: telephone
        pattern: '^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-1213
      secondary_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        description: Email of secondary contact person
        example: jackson_flies@gmail.com
  ShipmentDates:
    type: object
    description: The various dates associated with a shipment
    properties:
      requested_pack:
        type: string
        format: date
        example: 2018-03-15
      requested_pickup:
        type: string
        format: date
        example: 2018-03-15
      requested_latest_pickup:
        type: string
        format: date
        example: 2018-03-15
      requested_delivery:
        type: string
        format: date
        example: 2018-03-15
      planned_pack:
        type: string
        format: date
        example: 2018-03-15
      planned_pickup:
        type: string
        format: date
        example: 2018-03-15
      planned_latest_pickup:
        type: string
        format: date
        example: 2018-03-15
      planned_delivery:
        type: string
        format: date
        example: 2018-03-15
      scheduled_delivery:
        type: string
        format: date
        example: 2018-03-15
      required_delivery:
        type: string
        format: date
        example: 2018-03-15
      actual_pack:
        type: string
        format: date
        example: 2018-03-15
      actual_pickup_date:
        type: string
        format: date
        example: 2018-03-15
      actual_delivery:
        type: string
        format: date
        example: 2018-03-15
  ShipmentMarket:
    type: string
    description: One of the possible 'Markets' for a shipment
    example: dHHG
    enum:
      - dHHG
      - iHHG
      - iUB
    x-display-value:
      dHHG: Domestic HHG
      iHHG: International HHG
      iUB: International unaccompanied baggage
    x-nullable: true
  ShipmentStatus:
    type: string
    description: The stages in the lifecycle of a Shipment
    example: IN_PROGRESS
    enum: &SHIPMENTSTATUS
      - DRAFT
      - SUBMITTED
      - AWARDED
      - ACCEPTED
      - APPROVED
      - IN_TRANSIT
      - DELIVERED
      - COMPLETED
    x-display-value:
      DRAFT: Draft
      SUBMITTED: Submitted
      AWARDED: Awarded
      ACCEPTED: Accepted
      APPROVED: Approved
      IN_TRANSIT: In Transit
      DELIVERED: Delivered
      COMPLETED: Completed
  TransportPayload:
    type: object
    properties:
      actual_pickup_date:
        type: string
        format: date
        example: '2018-04-02'
        title: Actual Pickup Date
        x-nullable: true
      actual_pack_date:
        type: string
        format: date
        example: '2018-04-02'
        title: Actual Pack Date
        x-nullable: true
      net_weight:
        type: integer
        description: Actual net weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Net
      gross_weight:
        type: integer
        description: Gross weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Gross
      tare_weight:
        type: integer
        description: Tare weight of the shipment in lbs
        minimum: 0
        example: 10000
        x-nullable: true
        x-formatting: weight
        title: Tare
    required:
      - actual_pickup_date
      - actual_pack_date
      - net_weight
  ActualDeliveryDate:
    type: object
    properties:
      actual_delivery_date:
        type: string
        format: date
        example: '2018-04-02'
        x-nullable: true
        title: Actual Delivery Date
    required:
      - actual_delivery_date
  TSP:
    type: object
    description: The primary definition of a Transport Service Provider
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      name:
        type: string
        example: Moving Company, Inc.
        minLength: 1
        maxLength: 1024
      scac:
        type: string
        description: The SCAC associated with the TSP
        format: '^[A-Z]{2,4}$'
        example: USPS
      contact_email:
        type: string
        format: x-email
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
  InvalidRequestResponsePayload:
    type: object
    properties:
      errors:
        type: object
        additionalProperties:
          type: string
  StorageInTransit:
    type: object
    properties:
      id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
      location:
        type: string
        title: SIT Location
        enum:
          - ORIGIN
          - DESTINATION
        x-display-value:
          ORIGIN: Origin
          DESTINATION: Destination
      estimated_start_date:
        type: string
        format: date
        example: '2018-04-26'
        title: Estimated start date
      authorized_start_date:
        type: string
        format: date
        x-nullable: true
        example: '2018-04-26'
        title: Authorized Start Date
      actual_start_date:
        type: string
        format: date
        x-nullable: true
        example: '2018-04-26'
        title: Actual Start Date
      out_date:
        type: string
        format: date
        x-nullable: true
        example: '2018-04-26'
        title: Out Date
      notes:
        type: string
        example: Good to go!
        format: textarea
        x-nullable: true
        title: Note
      authorization_notes:
        type: string
        example: Good to go!
        format: textarea
        x-nullable: true
        title: Authorization Notes
      warehouse_id:
        type: string
        example: '000383'
        title: Warehouse ID number
      warehouse_name:
        type: string
        example: ABC Warehouse, Inc.
        title: Warehouse Name
      warehouse_phone:
        type: string
        format: telephone
        pattern: '^$|^[2-9]\d{2}-\d{3}-\d{4}$'
        example: 212-555-5555
        x-nullable: true
        title: Phone
      warehouse_email:
        type: string
        format: x-email
        pattern: '^$|^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        example: john_bob@example.com
        x-nullable: true
        title: Email
      shipment_id:
        type: string
        format: uuid
        example: c56a4180-65aa-42ec-a945-5fd21dec0538
        title: Shipment ID
      sit_number:
        type: string
        x-nullable: true
        example: 123456
        title: SIT Number
      status:
        type: string
        example: REQUESTED
        title: Status
      warehouse_address:
        $ref: '#/definitions/Address'
    required:
      - location
      - warehouse_address
      - warehouse_id
      - warehouse_name
      - estimated_start_date
  StorageInTransits:
    type: array
    items:
      $ref: '#/definitions/StorageInTransit'
paths:
  /tariff_400ng_items:
    get:
      summary: Retrieve list of 400ng items
      description: Gets a list of all 400ng items.
      operationId: getTariff400ngItems
      tags:
        - accessorials
      parameters:
        - in: query
          name: requires_pre_approval
          type: boolean
          default: false
          description: restricts the list to only items that require pre-approval
      responses:
        200:
          description: list of tariff 400ng items
          schema:
            $ref: '#/definitions/Tariff400ngItems'
        400:
          description: invalid request
        401:
          description: not authorized to get list of tariff 400ng items
        500:
          description: server error
  /blackouts:
    get:
      summary: retrieve a list of blacked out dates (for accessible TSPs)
      description: Gets a list of blackout periods which the current user can see
      operationId: indexBlackouts
      tags:
        - blackouts
      parameters:
        - in: query
          name: start_date
          type: string
          format: date
          description: restricts the search to blackout periods for which the endDate is after this date
        - in: query
          name: end_date
          type: string
          format: date
          description: restricts the search to blackout periods which startDate is before this date
        - in: query
          name: gbloc
          type: string
          description: restricts the search to return blackout periods which originate from this GBLOC
          pattern: '^[A-Z]{4}$'
        - in: query
          name: source_service_area
          type: string
          description: restricts the search to blackout periods with an explicit source rate area (zip3)
      responses:
        200:
          description: list of associated blackouts
          schema:
            $ref: '#/definitions/IndexBlackoutsPayload'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        500:
          description: server error
    post:
      summary: Adds a new Blackout period to the list of blackouts
      description: This is used to create a new blackout. When posting to this URL the payload Blackout should not
        contain an ID as this will be created when it is added to the DB.  Supplying this fields in the payload will
        result in a 400 bad request. The TSP ID will be inferred from the authenticated account making the request.

        At least one of GBLOC, zip3, Channel/COS or Market must be supplied. If more than one of these fields are supplied
        they will be AND'd together, i.e. GBLOC, Channel will restrict to shipments in the particular Channel which
        originate in the given GBLOC.
      operationId: createBlackout
      tags:
        - blackouts
      x-access: Access to this endpoint is restricted to members of the Admin, Transcom and JPPSO user groups along with the agents of the TSP.
      parameters:
        - in: body
          description: The blackout period to add
          name: payload
          required: true
          schema:
            $ref: '#/definitions/CreateBlackoutPayload'
      responses:
        201:
          description: The blackout as added to the database including DB ID
          schema:
            $ref: '#/definitions/BlackoutPayload'
        400:
          description: invalid request
        403:
          description: not authorized to create blackouts
        500:
          description: server error
  /blackouts/{blackoutId}:
    get:
      summary: retrieve the details of a blackout period
      operationId: getBlackout
      tags:
        - blackouts
      parameters:
        - in: path
          name: blackoutId
          type: string
          format: uuid
          required: true
          description: the unique identifier for the blackout
      responses:
        200:
          description: the details of the requested blackout period
          schema:
            $ref: '#/definitions/BlackoutPayload'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated blackout
        404:
          description: no blackout found with that UUID
        500:
          description: server error
    patch:
      summary: update the associated blackout
      operationId: patchBlackout
      tags:
        - blackouts
      parameters:
        - in: path
          name: blackoutId
          type: string
          format: uuid
          required: true
          description: the unique identifier for the blackout
        - in: body
          name: update
          required: true
          schema:
            $ref: '#/definitions/BlackoutPayload'
      responses:
        200:
          description: the blackout was successfully updated
          schema:
            $ref: '#/definitions/BlackoutPayload'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated blackout
        404:
          description: no blackout found with that UUID
        500:
          description: server error
    delete:
      summary: delete the associated blackout period
      operationId: deleteBlackout
      tags:
        - blackouts
      parameters:
        - in: path
          name: blackoutId
          type: string
          format: uuid
          required: true
          description: the unique identifier for the blackout
      responses:
        200:
          description: the blackout was successfully deleted
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated blackout
        404:
          description: no blackout found with that UUID
        500:
          description: server error
  /shipments/{shipmentId}/documents:
    get:
      summary: Returns a list of all Move Documents associated with this move
      description: Returns a list of all Move Documents associated with this move
      operationId: indexMoveDocuments
      tags:
        - move_docs
      parameters:
        - in: path
          name: shipmentId
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: returns list of move documents
          schema:
            $ref: '#/definitions/MoveDocuments'
        400:
          description: invalid request
        401:
          description: request requires user authentication
        403:
          description: user is not authorized
    post:
      summary: Creates a move document
      description: Created a move document with the given information
      operationId: createGenericMoveDocument
      tags:
        - move_docs
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - in: body
          name: createGenericMoveDocumentPayload
          required: true
          schema:
            $ref: '#/definitions/CreateGenericMoveDocumentPayload'
      responses:
        200:
          description: returns new move document object
          schema:
            $ref: '#/definitions/MoveDocumentPayload'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to modify this move
        500:
          description: server error
  /shipments/{shipmentId}/documents/{moveDocumentId}:
    put:
      summary: Updates a move document
      description: Update a move document with the given information
      operationId: updateMoveDocument
      tags:
        - move_docs
      parameters:
        - in: path
          name: shipmentId
          type: string
          format: uuid
          required: true
          description: UUID of the shipment model
        - in: path
          name: moveDocumentId
          type: string
          format: uuid
          required: true
          description: UUID of the move document model
        - in: body
          name: updateMoveDocument
          required: true
          schema:
            $ref: '#/definitions/MoveDocumentPayload'
      responses:
        200:
          description: updated instance of move document
          schema:
            $ref: '#/definitions/MoveDocumentPayload'
        400:
          description: invalid request
        401:
          description: request requires user authentication
        403:
          description: user is not authorized
        404:
          description: move document not found
        500:
          description: internal server error
  /uploads/{uploadId}:
    delete:
      summary: Deletes an upload
      description: Uploads represent a single digital file, such as a JPEG or PDF.
      operationId: deleteUpload
      tags:
        - uploads
      parameters:
        - in: path
          name: uploadId
          type: string
          format: uuid
          required: true
          description: UUID of the upload to be deleted
      responses:
        204:
          description: deleted
        400:
          description: invalid request
          schema:
            $ref: '#/definitions/InvalidRequestResponsePayload'
        403:
          description: not authorized
        404:
          description: not found
        500:
          description: server error
  /uploads:
    post:
      summary: Create a new upload
      description: Uploads represent a single digital file, such as a JPEG or PDF.
      operationId: createUpload
      tags:
        - uploads
      consumes:
        - multipart/form-data
      parameters:
        - in: query
          name: documentId
          type: string
          format: uuid
          required: false
          description: UUID of the document to add an upload to
        - in: formData
          name: file
          type: file
          description: The file to upload.
          required: true
      responses:
        201:
          description: created upload
          schema:
            $ref: '#/definitions/UploadPayload'
        400:
          description: invalid request
          schema:
            $ref: '#/definitions/InvalidRequestResponsePayload'
        403:
          description: not authorized
        404:
          description: not found
        500:
          description: server error
    delete:
      summary: Deletes a collection of uploads
      description: Uploads represent a single digital file, such as a JPEG or PDF.
      operationId: deleteUploads
      tags:
        - uploads
      parameters:
        - in: query
          name: uploadIds
          type: array
          items:
            type: string
            format: uuid
          required: true
          description: Array of UUIDs to be deleted
      responses:
        204:
          description: deleted
        400:
          description: invalid request
          schema:
            $ref: '#/definitions/InvalidRequestResponsePayload'
        403:
          description: not authorized
        404:
          description: not found
        500:
          description: server error
  /shipments:
    get:
      summary: Gets visible shipments
      description: Allows a user to retrieve a list of shipments. The shipments are restricted to those they have authorization to view
      operationId: indexShipments
      tags:
        - shipments
      parameters:
        - name: status
          in: query
          type: array
          items:
            type: string
            enum: *SHIPMENTSTATUS
          collectionFormat: csv
          description: Restrict the list to shipments with matching ShipmentStatus
        - name: order_by
          in: query
          type: string
          description: Sort the returned list according to this ordering
          enum:
            - PICKUP_DATE_ASC
            - PICKUP_DATE_DESC
            - DELIVERY_DATE_ASC
            - DELIVERY_DATE_DESC
      responses:
        200:
          description: returns an array of Shipments
          schema:
            $ref: '#/definitions/IndexShipments'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to list these shipments
        422:
          description: cannot process request with given information
        500:
          description: server error
  /shipments/{shipmentId}:
    get:
      summary: Gets a particular shipment
      description: Allows a user to retrieve the details of a particular shipment
      operationId: getShipment
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: returns the details of the shipment
          schema:
            $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to see the details of this shipment
        404:
          description: shipment UUID not found in system
        500:
          description: server error
    patch:
      summary: Updates a particular shipment
      description: Takes a partial Shipment object and replaces the fields in the DB with the ones passed in the body
      operationId: patchShipment
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: update
          in: body
          required: true
          schema:
            $ref: '#/definitions/Shipment'
      responses:
        200:
          description: returns the details of the shipment
          schema:
            $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to update the details of this shipment
        404:
          description: shipment UUID not found in system
        500:
          description: server error
  /shipments/{shipmentId}/service_agents:
    get:
      summary: Gets service agents for shipment
      description: Allows a user to retrieve a list of service agents for a shipment.
      operationId: indexServiceAgents
      tags:
        - service_agents
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: returns an array of Service Agents
          schema:
            $ref: '#/definitions/ServiceAgents'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to list these shipments
        422:
          description: cannot process request with given information
        500:
          description: server error
    post:
      summary: Create a Service Agent
      description: Creates a new Service Agent associated with a shipment
      operationId: createServiceAgent
      tags:
        - service_agents
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: serviceAgent
          in: body
          required: true
          description: Service Agent information
          schema:
            $ref: '#/definitions/ServiceAgent'
      responses:
        200:
          description: returns a Service Agent with UUID.
          schema:
            $ref: '#/definitions/ServiceAgent'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to add documents to this shipment
        500:
          description: server error
  /shipments/{shipmentId}/service_agents/{serviceAgentId}:
    patch:
      summary: Updates a particular service agent
      description: Takes a partial service agent object and replaces the fields in the DB with the ones passed int he body
      operationId: patchServiceAgent
      tags:
        - service_agents
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: serviceAgentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the service agent
        - name: serviceAgent
          in: body
          required: true
          schema:
            $ref: '#/definitions/ServiceAgent'
      responses:
        200:
          description: returns the details of the service agent
          schema:
            $ref: '#/definitions/ServiceAgent'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to update the details of this service agent
        404:
          description: service agent UUID not found in system
        500:
          description: server error
    delete:
      summary: delete the service agent related to the shipment
      operationId: deleteServiceAgent
      tags:
        - service_agents
      parameters:
        - in: path
          name: shipmentId
          type: string
          format: uuid
          required: true
          description: the unique identifier for the shipment
        - in: path
          name: serviceAgentId
          type: string
          format: uuid
          required: true
          description: the unique identifier for the service_agent
      responses:
        200:
          description: the service agent was successfully deleted
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated service agent
        404:
          description: no service agent found with that UUID
        500:
          description: server error
  /shipments/{shipmentId}/transportation_service_provider:
    get:
      summary: Gets transportation service provider for shipment
      description: Allows a user to retrieve the transportation service provider for a shipment.
      operationId: getTransportationServiceProvider
      tags:
        - transportation_service_provider
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: returns a Transporation Service Provider
          schema:
            $ref: '#/definitions/TransportationServiceProvider'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to list these shipments
        422:
          description: cannot process request with given information
        500:
          description: server error
  /shipment/{shipmentId}/completePmSurvey:
    post:
      summary: Completes a pre-move survey on a shipment
      description: Sets the pre-move survey as completed. Completion date will be recorded on shipment.
      operationId: completePmSurvey
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the move
      responses:
        200:
          description: returns updated shipment object
          schema:
            $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to complete this pre-move survey
        500:
          description: server error
  /shipments/{shipmentId}/accept:
    post:
      summary: Accepts an awarded shipment
      description: Accepts a shipment awarded to a TSP. The status of the shipment will be updated to ACCEPTED.
      operationId: acceptShipment
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: returns updated (accepted) shipment object
          schema:
            $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to accept this shipment
        409:
          description: the shipment is not in a state to be accepted
          schema:
            $ref: '#/definitions/Shipment'
        500:
          description: server error
  /shipments/{shipmentId}/transport:
    post:
      summary: Places an accepted shipment into transit state
      description: Places a shipment accepted by a TSP in transit. The status of the shipment will be updated to IN_TRANSIT and the pickup date will be set.
      operationId: transportShipment
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - in: body
          name: payload
          required: true
          schema:
            $ref: '#/definitions/TransportPayload'
      responses:
        200:
          description: returns updated (in_transit) shipment object
          schema:
            $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to accept this shipment
        409:
          description: the shipment is not in a state to be accepted
          schema:
            $ref: '#/definitions/Shipment'
        500:
          description: server error
  /shipments/{shipmentId}/deliver:
    post:
      summary: Places an in transit shipment to delivered state
      description: The status of the shipment will be updated to DELIVERED.
      operationId: deliverShipment
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - in: body
          name: payload
          required: true
          schema:
            $ref: '#/definitions/ActualDeliveryDate'
      responses:
        200:
          description: returns updated (delivered) shipment object
          schema:
            $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to accept this shipment
        409:
          description: the shipment is not in a state to be delivered
          schema:
            $ref: '#/definitions/Shipment'
        500:
          description: server error
  /shipments/{shipmentId}/claims:
    get:
      summary: Gets the list of claims associated with a shipment
      operationId: getShipmentClaims
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment for which contact details are requested
      responses:
        200:
          description: returns contact details for the shipment
          schema:
            type: array
            items:
              $ref: '#/definitions/Claim'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access this shipment
        500:
          description: server error
  /shipments/{shipmentId}/contact_details:
    get:
      summary: Gets the detailed contact information for a move
      description: Gets the detailed contact information for a move
      operationId: getShipmentContactDetails
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment for which contact details are requested
      responses:
        200:
          description: returns contact details for the shipment
          schema:
            $ref: '#/definitions/ShipmentContactDetails'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access this shipment
        500:
          description: server error
  /shipments/{shipmentId}/gov_bill_of_lading:
    post:
      summary: Creates a new government bill of lading (form 1203) document associated with a shipment
      description: Creates a move document for a GBL and stores it
      operationId: createGovBillOfLading
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        201:
          description: successfully created GBL move document for shipment
          schema:
            $ref: '#/definitions/MoveDocumentPayload'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to add documents to this shipment
        417:
          description: failed to meet data requirements for GBL form to be built
        500:
          description: server error
  /shipments/accessorials/{invoiceId}:
    get:
      summary: Get invoice for a shipment
      description: Get invoice for a shipment
      operationId: getInvoice
      tags:
        - accessorials
      parameters:
        - in: path
          name: invoiceId
          type: string
          format: uuid
          required: true
          description: UUID of the invoice to fetch
      responses:
        200:
          description: returns invoice for an invoiceId
          schema:
            $ref: '#/definitions/Invoice'
        400:
          description: invalid request
        401:
          description: User not authenticated to get invoice
        403:
          description: User not permitted to get invoice for this shipment
        404:
          description: Invoice UUID not found in system
        500:
          description: server error
  /shipments/{shipmentId}/invoices:
    get:
      summary: Retrieve invoices associated with a shipment
      description: Gets a list of all invoices associated with a shipment.
      operationId: getShipmentInvoices
      tags:
        - shipments
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: list of invoices associated with shipment
          schema:
            $ref: '#/definitions/Invoices'
        400:
          description: invalid request
        403:
          description: not authorized to get list of invoices for this shipment
        404:
          description: Shipment UUID not found in system
        500:
          description: server error
  /shipments/{shipmentId}/accessorials:
    get:
      summary: Retrieve shipment line items associated with a shipment
      description: Gets a list of all shipment line items associated with a shipment.
      operationId: getShipmentLineItems
      tags:
        - accessorials
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
      responses:
        200:
          description: list of shipment line items associated with shipment
          schema:
            $ref: '#/definitions/ShipmentLineItems'
        400:
          description: invalid request
        403:
          description: not authorized to get list of shipment line items for this shipment
        404:
          description: Shipment UUID not found in system
        500:
          description: server error
    post:
      summary: Creates a new shipment line item associated with a shipment
      description: Creates a new shipment line item associated with a shipment
      operationId: createShipmentLineItem
      tags:
        - accessorials
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - in: body
          name: payload
          required: true
          schema:
            $ref: '#/definitions/ShipmentLineItem'
      responses:
        201:
          description: successfully created shipment line item for shipment
          schema:
            $ref: '#/definitions/ShipmentLineItem'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to add line items to this shipment
        417:
          description: failed to meet data requirements for line items
        500:
          description: server error
  /shipments/accessorials/{shipmentLineItemId}:
    put:
      summary: Updates a shipment line item
      description: Update a shipment line item with the given information
      operationId: updateShipmentLineItem
      tags:
        - accessorials
      parameters:
        - in: path
          name: shipmentLineItemId
          type: string
          format: uuid
          required: true
          description: UUID of the shipment line item model
        - in: body
          name: payload
          required: true
          schema:
            $ref: '#/definitions/ShipmentLineItem'
      responses:
        200:
          description: updated instance of shipment line
          schema:
            $ref: '#/definitions/ShipmentLineItem'
        400:
          description: invalid request
        401:
          description: request requires user authentication
        403:
          description: user is not authorized
        404:
          description: shipment line item not found
        422:
          description: shipment line item not in state to update
        500:
          description: internal server error
    delete:
      summary: delete the associated shipment line
      operationId: deleteShipmentLineItem
      tags:
        - accessorials
      parameters:
        - in: path
          name: shipmentLineItemId
          type: string
          format: uuid
          required: true
          description: the unique identifier for the shipment line
      responses:
        200:
          description: the shipment line item was successfully deleted
          schema:
            $ref: '#/definitions/ShipmentLineItem'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated shipment line item
        404:
          description: no shipment line item found with that UUID
        500:
          description: server error
  /shipments/accessorials/{shipmentLineItemId}/approve:
    post:
      summary: Updates a shipment line item to approve status
      description: Update a shipment line item with approve status
      operationId: approveShipmentLineItem
      tags:
        - accessorials
      parameters:
        - in: path
          name: shipmentLineItemId
          type: string
          format: uuid
          required: true
          description: UUID of the shipment line item model
      responses:
        200:
          description: shipment line item approved
          schema:
            $ref: '#/definitions/ShipmentLineItem'
        400:
          description: invalid request
        401:
          description: request requires user authentication
        403:
          description: user is not authorized
        404:
          description: shipment line item not found
        500:
          description: internal server error
  /shipments/{shipmentId}/storage_in_transits:
    get:
      summary: Gets storage in transit entries for shipment
      description: Allows a user to retrieve a list of storage in transit entires for a shipment.
      operationId: indexStorageInTransits
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
      responses:
        200:
          description: returns an array of storage in transit entires
          schema:
            $ref: '#/definitions/StorageInTransits'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this end point
        403:
          description: not authorized to list these storage in transit entries
        422:
          description: cannot process request with given information
        500:
          description: server error
    post:
      summary: Create a storage in transit entry
      description: Creates a new storage in transit entry associated with a shipment
      operationId: createStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: storageInTransit
          in: body
          required: true
          description: Storage In Transit information
          schema:
            $ref: '#/definitions/StorageInTransit'
      responses:
        201:
          description: successfully created Storage In Transit
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this end point
        403:
          description: not authorized to add transit in storage entires to this shipment
        500:
          description: server error
  /shipments/{shipmentId}/storage_in_transits/{storageInTransitId}:
    get:
      summary: Gets a particular Storage In Transit for a shipment
      description: Allows a user to retrieve a specific Storage In Transit entry for a shipment
      operationId: getStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of the Storage in Transit entry
      responses:
        200:
          description: returns the details of a storage in transit entry
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to view the details of this storage in transit entry
        404:
          description: storage in transit UUID not found in system
        500:
          description: server error
    patch:
      summary: Updates an particular Storage In Transit entry
      description: Allows changes to be made to a particular Storage In Transit entry
      operationId: patchStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          description: UUID of storage in transit
          required: true
        - name: storageInTransit
          in: body
          required: true
          schema:
            $ref: '#/definitions/StorageInTransit'
      responses:
        200:
          description: returns the details of the storage in transit entry
          schema:
            $ref: '#/definitions/StorageInTransit'
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to update the details of this service agent
        404:
          description: storage in transit UUID not found in system
        500:
          description: server error
    delete:
      summary: Deletes a particular Storage In Transit entry related to a shipment
      operationId: deleteStorageInTransit
      tags:
        - storage_in_transits
      parameters:
        - name: shipmentId
          in: path
          type: string
          format: uuid
          required: true
          description: UUID of shipment
        - name: storageInTransitId
          in: path
          type: string
          format: uuid
          description: UUID of storage in transit
          required: true
      responses:
        200:
          description: the storage in transit entry was successfully deleted
        400:
          description: invalid request
        401:
          description: must be authenticated to use this endpoint
        403:
          description: not authorized to access the associated storage in transit entry
        404:
          description: no service agent found with that UUID
        500:
          description: server error
  /tsps:
    get:
      summary: List all TSPs
      description: Gets a list of all the TSPs which the logged in user has access to.
      operationId: indexTSPs
      tags:
        - tsps
      x-access: Access to this endpoint is restricted to members of the Admin, Transcom & JPPSO user groups
      responses:
        200:
          description: list of TSPs
          schema:
            type: array
            items:
              $ref: '#/definitions/TSP'
        400:
          description: invalid request
        401:
          description: must be authenticated to access this endpoint
        500:
          description: server error
  /tsps/{tspId}/shipments:
    get:
      summary: Retrieve shipments associated with a TSP
      description: Gets a list of all shipments associated with a TSP. Shipments can be restricted to be in a certain state, e.g. AWARDED
      operationId: getTspShipments
      tags:
        - tsps
      x-access: Access to this endpoint is restricted to members of the Admin, Transcom and JPPSO user groups along with the agents of the TSP.
      parameters:
        - in: path
          name: tspId
          type: string
          format: uuid
          required: true
          description: UUID of the TSP
        - name: status
          in: query
          type: string
          required: false
          description: Status of shipments to load, e.g. AWARDED
        - name: order_by
          in: query
          type: string
          description: Sort the returned list according to this ordering
          enum:
            - PICKUP_DATE_ASC
            - PICKUP_DATE_DESC
            - DELIVERY_DATE_ASC
            - DELIVERY_DATE_DESC
        - name: limit
          in: query
          type: integer
          description: maximum number of records to return
          default: 25
        - name: offset
          in: query
          type: integer
          description: offset into records to begin selection from.
          default: 0
      responses:
        200:
          description: list of associated shipments
          schema:
            type: array
            items:
              $ref: '#/definitions/Shipment'
        400:
          description: invalid request
        403:
          description: not authorized to get list of shipments for this TSP
        404:
          description: TSP UUID not found in system
        500:
          description: server error
  /tsps/{tspId}/blackouts:
    get:
      summary: Retrieve a list of the blackouts associated with a TSP
      description: Gets a list of all blackouts associated with a TSP. Blackouts retrieved can be restricted by one or more
      operationId: getTspBlackouts
      tags:
        - tsps
      x-access: Access to this endpoint is restricted to members of the Admin, Transcom and JPPSO user groups along with the agents of the TSP.
      parameters:
        - in: path
          name: tspId
          type: string
          format: uuid
          required: true
          description: UUID of the TSP
        - in: query
          name: start_date
          type: string
          format: date
          description: restricts the search to blackout periods for which the endDate is after this date
        - in: query
          name: end_date
          type: string
          format: date
          description: restricts the search to blackout periods which startDate is before this date
        - in: query
          name: gbloc
          description: restricts the search to return blackout periods which originate from this GBLOC
          type: string
          pattern: '^[A-Z]{4}$'
        - in: query
          name: source_service_area
          type: string
          description: restricts the search to blackout periods with and explicit source service area
      responses:
        200:
          description: list of associated blackouts
          schema:
            type: array
            items:
              $ref: '#/definitions/BlackoutPayload'
        400:
          description: invalid request
        403:
          description: not authorized to get list of blackouts for this TSP
        404:
          description: TSP UUID not found in system
        500:
          description: server error
